---
import { getEntryBySlug } from 'astro:content';

// ✅ URLのスラグを取得
const { slug } = Astro.params;

// ✅ スラグに対応するプロジェクトデータを取得
const project = await getEntryBySlug('projects', slug);

if (!project) {
  throw new Error(`🚨 Project "${slug}" not found`);
}

// ✅ 画像リストを作成
const images = [
  `/photo/${slug}/01.jpeg`,
  `/photo/${slug}/02.jpeg`,
  `/photo/${slug}/03.jpeg`
];
---
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{project?.data?.title || "プロジェクト詳細"}</title>
    <link rel="stylesheet" href="/css/style.css">
</head>
<body>
    <h1>{project?.data?.title}</h1>
    <p class="project-caption">{project?.data?.caption || "キャプションがありません"}</p> 

    <div class="image-gallery">
      {images.map(image => (
        <img src={image} alt={project?.data?.title} />
      ))}
    </div>
